DROP TABLE IF EXISTS "user" CASCADE;
DROP TABLE IF EXISTS board CASCADE;
DROP TABLE IF EXISTS user_board CASCADE;

CREATE TABLE "user" (
  id SERIAL PRIMARY KEY,
  email varchar,
  password varchar
);

CREATE TABLE  board (
  id SERIAL PRIMARY KEY,
  name varchar,
  owner_id int REFERENCES "user"(id) ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE TABLE  user_board (
  user_id int REFERENCES "user"(id) ON UPDATE CASCADE ON DELETE CASCADE,
  board_id int REFERENCES board(id) ON UPDATE CASCADE ON DELETE CASCADE,
  CONSTRAINT id PRIMARY KEY (user_id, board_id)
);

INSERT INTO "user"(email,password)
VALUES ('admin', 'admin');

INSERT INTO "user"(email,password)
VALUES ('user', 'user');

INSERT INTO board(name, owner_id)
VALUES ('example_board1', 1);

INSERT INTO board(name, owner_id)
VALUES ('example_board2', 1);

INSERT INTO board(name, owner_id)
VALUES ('example_board3', 2);