DROP TABLE IF EXISTS "user" CASCADE;
DROP TABLE IF EXISTS board CASCADE;
DROP TABLE IF EXISTS userboard CASCADE;
DROP TABLE IF EXISTS list CASCADE;
DROP TABLE IF EXISTS card CASCADE;

CREATE TABLE "user" (
  id SERIAL PRIMARY KEY,
  email varchar UNIQUE NOT NULL,
  password varchar NOT NULL
);

CREATE TABLE  board (
  id SERIAL PRIMARY KEY,
  name varchar NOT NULL
);

CREATE TABLE  userboard (
  user_id int REFERENCES "user"(id) ON UPDATE CASCADE ON DELETE CASCADE,
  board_id int REFERENCES board(id) ON UPDATE CASCADE ON DELETE CASCADE,
  user_role varchar NOT NULL,
  CONSTRAINT id PRIMARY KEY (user_id, board_id)
);

CREATE TABLE list (
  id SERIAL PRIMARY KEY,
  name varchar NOT NULL,
  board_id int REFERENCES board(id) ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE TABLE card (
  id SERIAL PRIMARY KEY,
  name varchar NOT NULL,
  time_limit varchar,
  list_id int REFERENCES list(id) ON UPDATE CASCADE ON DELETE CASCADE
);

INSERT INTO "user"(email,password)
VALUES ('admin', 'admin');

INSERT INTO "user"(email,password)
VALUES ('user', 'user');

INSERT INTO board(name)
VALUES ('example_board1');

INSERT INTO board(name)
VALUES ('example_board2');

INSERT INTO board(name)
VALUES ('example_board3');